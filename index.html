<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Weather Widget</title><link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"></head><body class="bg-gray-100 flex items-center justify-center min-h-screen p-4"><div class="bg-white shadow-lg rounded-lg p-6 max-w-xl w-full text-center"><h1 class="text-3xl font-bold text-gray-800 mb-6">Weather Widget</h1><div class="flex flex-col gap-4 mb-6"><input type="text" id="cityInput" placeholder="Enter city name" class="p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"><button id="fetchWeatherBtn" class="bg-blue-600 text-white p-3 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-200">Get Weather</button></div><p id="message" class="text-sm text-red-500 mt-2 mb-4 hidden"></p><div id="weatherDisplay" class="mt-4 hidden"><h2 id="weatherCity" class="text-3xl font-bold text-gray-800"></h2><p id="weatherTemp" class="text-6xl font-extrabold text-blue-700 mt-2"></p><p id="weatherConditions" class="text-xl text-gray-600 mt-2 capitalize"></p><img id="weatherIcon" src="" alt="Weather icon" class="w-20 h-20 mx-auto"></div><div id="forecastDisplay" class="mt-8 hidden"><h3 class="text-2xl font-bold text-gray-800 mb-4">3-Day Forecast</h3><div id="forecastContainer" class="grid grid-cols-1 md:grid-cols-3 gap-4"></div></div></div><script>const cityInput = document.getElementById('cityInput');const fetchWeatherBtn = document.getElementById('fetchWeatherBtn');const weatherDisplay = document.getElementById('weatherDisplay');const weatherCity = document.getElementById('weatherCity');const weatherTemp = document.getElementById('weatherTemp');const weatherConditions = document.getElementById('weatherConditions');const weatherIcon = document.getElementById('weatherIcon');const message = document.getElementById('message');const forecastDisplay = document.getElementById('forecastDisplay');const forecastContainer = document.getElementById('forecastContainer');const API_KEY = 'YOUR_OPENWEATHER_API_KEY';function checkApiKey() {if (!API_KEY || API_KEY === 'YOUR_OPENWEATHER_API_KEY') {showMessage('Error: Please replace YOUR_OPENWEATHER_API_KEY with your actual API key in index.html.', true);return false;}return true;}async function fetchCurrentWeather(city) {const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${API_KEY}&units=metric`;const response = await fetch(url);if (!response.ok) {if (response.status === 404) {throw new Error('City not found.');} else {throw new Error(`HTTP error! Status: ${response.status}`);}}return response.json();}async function fetchForecast(city) {const url = `https://api.openweathermap.org/data/2.5/forecast?q=${city}&appid=${API_KEY}&units=metric`;const response = await fetch(url);if (!response.ok) {if (response.status === 404) {throw new Error('City not found for forecast.');} else {throw new Error(`HTTP error! Status: ${response.status} for forecast.`);}}return response.json();}async function fetchWeatherAndForecast(city) {if (!checkApiKey()) {return;}try {showMessage('Fetching weather...', false);const [currentData, forecastData] = await Promise.all([fetchCurrentWeather(city),fetchForecast(city)]);displayCurrentWeather(currentData);displayThreeDayForecast(forecastData);message.classList.add('hidden');weatherDisplay.classList.remove('hidden');forecastDisplay.classList.remove('hidden');} catch (error) {showMessage(`Failed to fetch weather: ${error.message}`, true);console.error('Weather fetch error:', error);weatherDisplay.classList.add('hidden');forecastDisplay.classList.add('hidden');}}function displayCurrentWeather(data) {weatherCity.textContent = data.name;weatherTemp.textContent = `${Math.round(data.main.temp)}°C`;weatherConditions.textContent = data.weather[0].description.charAt(0).toUpperCase() + data.weather[0].description.slice(1);const iconCode = data.weather[0].icon;weatherIcon.src = `https://openweathermap.org/img/w/${iconCode}.png`;weatherIcon.alt = data.weather[0].description;}function displayThreeDayForecast(data) {forecastContainer.innerHTML = '';const processedDays = {};const now = new Date();now.setHours(0, 0, 0, 0);for (const item of data.list) {const itemDate = new Date(item.dt * 1000);const dayKey = itemDate.toLocaleDateString('en-US');if (itemDate.getTime() < now.getTime() && itemDate.toLocaleDateString('en-US') === now.toLocaleDateString('en-US')) {continue;}if (!processedDays[dayKey]) {processedDays[dayKey] = {temp: item.main.temp,description: item.weather[0].description,icon: item.weather[0].icon,fullDate: itemDate};} else {const existingHourDiff = Math.abs(processedDays[dayKey].fullDate.getHours() - 12);const newHourDiff = Math.abs(itemDate.getHours() - 12);if (newHourDiff < existingHourDiff) {processedDays[dayKey] = {temp: item.main.temp,description: item.weather[0].description,icon: item.weather[0].icon,fullDate: itemDate};}}}let forecastCount = 0;const sortedDayKeys = Object.keys(processedDays).sort((a, b) => new Date(a).getTime() - new Date(b).getTime());for (const dayKey of sortedDayKeys) {if (forecastCount >= 3) break;const forecastItem = processedDays[dayKey];const forecastDate = forecastItem.fullDate;const dayName = forecastDate.toLocaleDateString('en-US', { weekday: 'short' });const dateString = forecastDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });const forecastCard = `<div class="bg-blue-50 p-4 rounded-lg shadow-md flex flex-col items-center"><p class="text-lg font-semibold text-gray-700">${dayName}, ${dateString}</p><img src="https://openweathermap.org/img/w/${forecastItem.icon}.png" alt="${forecastItem.description}" class="w-16 h-16"><p class="text-3xl font-bold text-blue-600">${Math.round(forecastItem.temp)}°C</p><p class="text-md text-gray-500 capitalize">${forecastItem.description}</p></div>`;forecastContainer.innerHTML += forecastCard;forecastCount++;}}function showMessage(text, isError = true) {message.textContent = text;message.classList.remove('hidden');message.classList.toggle('text-red-500', isError);message.classList.toggle('text-green-500', !isError);weatherDisplay.classList.add('hidden');forecastDisplay.classList.add('hidden');}fetchWeatherBtn.addEventListener('click', () => {const city = cityInput.value.trim();if (city) {fetchWeatherAndForecast(city);} else {showMessage('Please enter a city name.', true);}});cityInput.addEventListener('keypress', (event) => {if (event.key === 'Enter') {fetchWeatherBtn.click();}});</script></body></html>